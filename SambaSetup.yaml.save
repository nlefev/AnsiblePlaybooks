- name: Setup Samba Share
  hosts: themachine
  become: true
  vars_prompt:
    - name: ShareName
      prompt: Enter in the primary share name (THERE CAN BE NO SPACES!)
      private: no
    - name: ShareUser
      prompt: Enter in owner username
      private: no
  tasks:
    - name: Update apt cache
      apt: update_cache=yes force_apt_get=yes
    - name: Install Samba
      apt:
        name: samba
        state: present
    - name: Enable smbd server
      shell: systemctl enable smbd
    - name: Create share directory
      file:
        path: '/{{ShareName}}/'
        state: directory
        owner: '{{ShareUser}}'
        group: '{{ShareUser}}'

    - name: Configure share name
      lineinfile:
        path: /etc/samba/smb.conf
        search_string: 'server string'
        line: 'server string = {{ShareName}}'
    - name: Append share info to smb.conf
      blockinfile:
        path: /etc/samba/smb.conf
        block: |
          
